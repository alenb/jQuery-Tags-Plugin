(function(a){a.fn.jtags=function(){return this.each(function(){a(this).on("click",function(){a(this).find("li:last-child input[type=text]").focus()});a(this).on("keyup","input[type=text]",function(b){if(b.keyCode==32){if(a(this).val()!=" "){clone=a(this).parent().clone().addClass("tag");str=clone.find("input[type=text]").val();str=str.replace(/^\s+|\s+$/g,"");str=str.toLowerCase();var c="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";var d="aaaaeeeeiiiioooouuuunc------";for(var e=0,f=c.length;e<f;e++)str=str.replace(new RegExp(c.charAt(e),"g"),d.charAt(e));str=str.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");clone.find("input[type=text]").val(str);clone.prepend(str);clone.find("input[type=text]").hide();clone.find(".remove").show();a(this).parent().before(clone);a(this).val("")}else{a(this).val("")}}});a(this).on("click",".remove",function(){a(this).parent().fadeOut("fast",function(){a(this).remove()})});a(this).sortable({items:"li:not(:last-child)"})})}})(jQuery);